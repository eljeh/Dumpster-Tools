---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1);
---

<nav id='navBar'></nav>

<script>
  const navBarList = document.getElementById('navBar');
  //const netlifyIdentity = window.netlifyIdentity;
  renderNavBar();
  // if not logged in,remove the slot
  // netlifyIdentity.on('<i class="fi fi-bs-exit"></i><br/>logout', () => {
  //   removeNavBar();
  //   window.location.href = '/';
  // });

  // if (netlifyIdentity) {
  //   netlifyIdentity.on('<i class="fi fi-bs-enter"></i><br/>login', (user) => {
  //     renderNavBar();
  //   });
  //   // // Redirect to the main page after a successful login
  //   netlifyIdentity.on('init', (user) => {
  //     if (!user) {
  //       netlifyIdentity.on('login', () => {
  //         renderNavBar();
  //       });
  //     }
  //   });
  // }

  // Function to render NavBar component



  function renderNavBar() {
    navBarList.innerHTML = '<hr style="opacity: 0.5;margin: 0 0 0.5em -0.5em; width: 150%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="/orderPack"><i class="fi fi-ss-house-user"></i><span class="sideNavLinkText">Game</span></a>`;
    navBarList.innerHTML +=
      '<hr style="opacity: 0.25;margin: 0 0 0.5em 0; width: 100%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="/playerInfo"><i class="fi fi-ss-user"></i><span class="sideNavLinkText">Player Info</span></a>`;
    navBarList.innerHTML +=
      '<hr style="opacity: 0.25;margin: 0 0 0.5em 0; width: 100%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="/vehicleInfo"><i class="fi fi-ss-car-rear"></i><span class="sideNavLinkText">Vehicle Info</span></a>`;
    navBarList.innerHTML +=
      '<hr style="opacity: 0.25;margin: 0 0 0.5em 0; width: 100%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="#"><i class="fi fi-ss-flag"></i><span class="sideNavLinkText">Flag Info</span></a>`;
    navBarList.innerHTML +=
      '<hr style="opacity: 0.25;margin: 0 0 0.5em 0;width: 100%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="/bunkerList"><i class="fi fi-ss-cabin"></i><span class="sideNavLinkText">Bunker list</span></a>`;
    navBarList.innerHTML +=
      '<hr style="opacity: 0.25;margin: 0 0 0.5em 0; width: 100%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="/hordeSpawner"><i class="fi fi-ss-users"></i><span class="sideNavLinkText">Horde Spawner</span></a>`;
    navBarList.innerHTML +=
      '<hr style="opacity: 0.25;margin: 0 0 0.5em 0;width: 100%;"/>';
    navBarList.innerHTML += `<a class="sideNavLink" href="/maze"><i class="fi fi-ss-compass-alt"></i><span class="sideNavLinkText">Maze</span></a>`;
  
  
  //  navBarList.innerHTML += '<hr style="opacity: 0.5;margin: 0.5em 0; width: 100%;"/>';
  //   navBarList.innerHTML +=
  //     '<a class="sideNavLink " href="/orderPack"><i class="fi fi-ss-ban"></i><span class="sideNavLinkText">Order Pack</span></a>';
  //   navBarList.innerHTML +=
  //     '<a class="sideNavLink" href="/sendMessage"><i class="fi fi-ss-ban"></i><span class="sideNavLinkText">Send Message</span></a>';
  //   navBarList.innerHTML +=
  //     '<a class="sideNavLink" href="/teleporter"><i class="fi fi-ss-ban"></i><span class="sideNavLinkText">Teleporter</span></a>';
  //   // navBarList.innerHTML +=
  //   //   '<a class="sideNavLink" href="/econfile">Economy Override</a>';
  //   navBarList.innerHTML +=
  //     '<a class="sideNavLink" href="/apis"><i class="fi fi-ss-ban"></i><span class="sideNavLinkText">APIs</span></a>';
 

  }

  // function removeNavBar() {
  //   navBarList.innerHTML = '';
  // }
</script>

<style is:inline>
  nav {
    display: flex;
    flex-direction: column;
    margin-top: 0;
    gap: 0 1em;
    align-items: start;
    justify-content: flex-start;
    margin-bottom: 1em;
    flex-wrap: wrap;
    background-color: var(--color-accent);
    padding: 5em 1.25em 0;
    z-index: 1000;
    height: 100%;
  }
  a.netlify-identity-button {
    text-wrap: nowrap;
  }
  .sideNavLink {
    display: flex;
    align-items: center;
    text-wrap: nowrap;
    position: relative;
  }

  a .fi {
    font-size: 2em;
  }
  .sideNavLinkText {
    font-size: 0;
    margin-left: 0.75em;
    transition: font-size 0.5s ease-in-out;
    position: absolute;
    left: 2em;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
  }
  .sideNavLink:hover .sideNavLinkText {
    background-color: var(--color-accent);
    box-shadow: -1px 1px 13px 3px #00000042;
    padding: 0.5em;
    border-radius: 0.5em;
    opacity: 1;
    font-size: 1em;
  }
</style>
